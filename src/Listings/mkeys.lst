C51 COMPILER V9.60.7.0   MKEYS                                                             07/20/2025 23:07:44 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MKEYS
OBJECT MODULE PLACED IN ..\bin\mkeys.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE mkeys.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\include) DEBUG OBJECTEXTEND P
                    -RINT(.\Listings\mkeys.lst) TABS(2) OBJECT(..\bin\mkeys.obj)

line level    source

   1          #include<global.h>
   2          #include<reg51.h>
   3          #include<mkeys.h>
   4          
   5          #define mkeys P1
   6          
   7          #define Sense_Column1()     Is_Bit_Clr(P1,BIT4)
   8          #define Sense_Column2()     Is_Bit_Clr(P1,BIT5)
   9          #define Sense_Column3()     Is_Bit_Clr(P1,BIT6)
  10          #define Sense_Column4()     Is_Bit_Clr(P1,BIT7)
  11          
  12          void Active_Row1()
  13          {
  14   1        Clr_Bit(P1,BIT0);
  15   1        Set_Bit(P1,BIT1);
  16   1        Set_Bit(P1,BIT2);
  17   1        Set_Bit(P1,BIT3);
  18   1      }
  19          
  20          void Active_Row2()
  21          {
  22   1        Set_Bit(P1,BIT0);
  23   1        Clr_Bit(P1,BIT1);
  24   1        Set_Bit(P1,BIT2);
  25   1        Set_Bit(P1,BIT3);
  26   1      }
  27          
  28          void Active_Row3()
  29          {
  30   1        Set_Bit(P1,BIT0);
  31   1        Set_Bit(P1,BIT1);
  32   1        Clr_Bit(P1,BIT2);
  33   1        Set_Bit(P1,BIT3);
  34   1      }
  35          
  36          void Active_Row4()
  37          {
  38   1        Set_Bit(P1,BIT0);
  39   1        Set_Bit(P1,BIT1);
  40   1        Set_Bit(P1,BIT2);
  41   1        Clr_Bit(P1,BIT3);
  42   1      }
  43          
  44          unsigned char Key_Buf[16] = "789%456*123-#0=+";
  45          
  46          void Config_mkeys(void)
  47          {
  48   1        mkeys=0xff; // 1111 1111 By default HIGH
  49   1      }
  50          
  51          unsigned char get_key(void)
  52          {
  53   1        unsigned char Key=0;
  54   1      
C51 COMPILER V9.60.7.0   MKEYS                                                             07/20/2025 23:07:44 PAGE 2   

  55   1        Active_Row1();
  56   1        if(Sense_Column1())
  57   1        {
  58   2          while(Sense_Column1());
  59   2          Key=Key_Buf[0];
  60   2        }
  61   1        else if(Sense_Column2())
  62   1        {
  63   2          while(Sense_Column2());
  64   2          Key=Key_Buf[1];
  65   2        }
  66   1        else if(Sense_Column3())
  67   1        {
  68   2          while(Sense_Column3());
  69   2          Key=Key_Buf[2];
  70   2        }
  71   1        else if(Sense_Column4())
  72   1        {
  73   2          while(Sense_Column4());
  74   2          Key=Key_Buf[3];
  75   2        }
  76   1        else
  77   1        {
  78   2          Active_Row2();
  79   2          if(Sense_Column1())
  80   2          {
  81   3            while(Sense_Column1());
  82   3            Key=Key_Buf[4];
  83   3          }
  84   2          else if(Sense_Column2())
  85   2          {
  86   3            while(Sense_Column2());
  87   3            Key=Key_Buf[5];
  88   3          }
  89   2          else if(Sense_Column3())
  90   2          {
  91   3            while(Sense_Column3());
  92   3            Key=Key_Buf[6];
  93   3          }
  94   2          else if(Sense_Column4())
  95   2          {
  96   3            while(Sense_Column4());
  97   3            Key=Key_Buf[7];
  98   3          }
  99   2          else
 100   2          {
 101   3            Active_Row3();
 102   3            if(Sense_Column1())
 103   3            {
 104   4              while(Sense_Column1());
 105   4              Key=Key_Buf[8];
 106   4            }
 107   3            else if(Sense_Column2())
 108   3            {
 109   4              while(Sense_Column2());
 110   4              Key=Key_Buf[9];
 111   4            }
 112   3            else if(Sense_Column3())
 113   3            {
 114   4              while(Sense_Column3());
 115   4              Key=Key_Buf[10];
 116   4            }
C51 COMPILER V9.60.7.0   MKEYS                                                             07/20/2025 23:07:44 PAGE 3   

 117   3            else if(Sense_Column4())
 118   3            {
 119   4              while(Sense_Column4());
 120   4              Key=Key_Buf[11];
 121   4            }
 122   3            else
 123   3            {
 124   4              Active_Row4();
 125   4              if(Sense_Column1())
 126   4              {
 127   5                while(Sense_Column1());
 128   5                Key=Key_Buf[12];
 129   5              }
 130   4              else if(Sense_Column2())
 131   4              {
 132   5                while(Sense_Column2());
 133   5                Key=Key_Buf[13];
 134   5              }
 135   4              else if(Sense_Column3())
 136   4              {
 137   5                while(Sense_Column3());
 138   5                Key=Key_Buf[14];
 139   5              }
 140   4              else if(Sense_Column4())
 141   4              {
 142   5                while(Sense_Column4());
 143   5                Key=Key_Buf[15];
 144   5              }
 145   4            }
 146   3          }
 147   2        }
 148   1        return Key;
 149   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    278    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
